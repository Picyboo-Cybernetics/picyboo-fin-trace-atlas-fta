@import "tailwindcss";

@layer base {
  :root {
    color-scheme: light;
    --bg-dark: #0D1117;
    --bg-elev: #161B22;
    --bg-soft: #1F2530;
    --border: #30363D;
    --fg: #E6EDF3;
    --fg-muted: #9AA4AE;
    --accent: #2F81F7;
    --accent-2: #A5D6FF;
    --danger: #F47070;
    --success: #3FB950;
    --warning: #F4BD61;
    --badge-bg-dark: rgba(14, 20, 28, 0.85);
    --badge-bg-light: rgba(255, 255, 255, 0.85);
    --bg-grad: linear-gradient(180deg, #0D1117 0%, #161B22 65%, #10151C 100%);
    --chart-accent: #1F6FEB;
    --chart-muted: rgba(75, 85, 99, 0.25);
    --chart-label: #0B1220;
    --chart-axis: #4B5563;
    --chart-positive: #3FB950;
    --chart-positive-muted: rgba(63, 185, 80, 0.18);
    --chart-positive-contrast: #14532D;
    --graph-color-1: #2F81F7;
    --graph-color-2: #A5D6FF;
    --graph-color-3: #3FB950;
    --graph-color-4: #F4BD61;
    --graph-color-5: #F47070;
    --graph-color-6: #8B5CF6;
    --graph-color-7: #14B8A6;
    --graph-color-8: #FACC15;
    --graph-color-9: #EC4899;
    --graph-color-10: #6366F1;
    --graph-color-11: #0EA5E9;
    --graph-color-12: #A855F7;
  }

  html[data-theme='dark'] {
    color-scheme: dark;
    --bg: var(--bg-dark);
    --bg-2: var(--bg-elev);
    --bg-3: var(--bg-soft);
    --muted: var(--fg-muted);
    --accent: var(--accent);
    --accent2: var(--accent-2);
    --line: var(--border);
    --grad: var(--bg-grad);
    --badge-surface: var(--badge-bg-dark);
    --text-default: var(--fg);
    --text-contrast: #0B1220;
    --chart-accent: var(--accent2);
    --chart-muted: rgba(154, 164, 174, 0.35);
    --chart-label: var(--text-default);
    --chart-axis: var(--muted);
    --chart-positive: var(--success);
    --chart-positive-muted: rgba(63, 185, 80, 0.28);
    --chart-positive-contrast: #CBEFCE;
  }

  html[data-theme='light'] {
    color-scheme: light;
    --bg: #FFFFFF;
    --bg-2: #F6F8FA;
    --bg-3: #EEF2F7;
    --muted: #4B5563;
    --accent: #1F6FEB;
    --accent2: #2F81F7;
    --line: #D0D7DE;
    --grad: linear-gradient(180deg, #F6F8FA 0%, #EEF2F7 100%);
    --badge-surface: var(--badge-bg-light);
    --text-default: #0B1220;
    --text-contrast: #0B1220;
    --chart-accent: var(--accent);
    --chart-muted: rgba(75, 85, 99, 0.28);
    --chart-label: var(--text-default);
    --chart-axis: var(--muted);
    --chart-positive: var(--success);
    --chart-positive-muted: rgba(63, 185, 80, 0.18);
    --chart-positive-contrast: #14532D;
  }

  html {
    scroll-behavior: smooth;
    background-color: var(--bg);
  }

  body {
    @apply font-sans antialiased transition-colors duration-300;
    color: var(--text-default);
    background: var(--grad);
    min-height: 100vh;
  }

  ::selection {
    background-color: var(--accent2);
    color: var(--text-contrast);
  }

  a,
  .link {
    color: var(--accent);
  }

  a:hover,
  .link:hover {
    color: var(--accent2);
  }

  .text-muted {
    color: var(--muted);
  }

  .text-accent {
    color: var(--accent);
  }

  .text-accent-strong {
    color: var(--accent2);
  }

  .text-danger {
    color: var(--danger);
  }

  .text-success {
    color: var(--success);
  }

  .text-warning {
    color: var(--warning);
  }

  .panel,
  .card,
  .box {
    background: var(--bg-2);
    border: 1px solid var(--line);
    color: var(--text-default);
  }

  .section-soft {
    background: var(--bg-3);
    color: var(--text-default);
  }

  .surface-border {
    border: 1px solid var(--line);
  }

  .surface-bg {
    background: var(--bg-2);
  }

  .surface-soft {
    background: var(--bg-3);
  }

  kbd,
  code,
  pre {
    background: var(--bg-3);
    color: var(--text-default);
    border: 1px solid var(--line);
  }

  .input,
  .select,
  .textarea {
    background: var(--bg-2);
    color: var(--text-default);
    border: 1px solid var(--line);
  }

  .input:focus,
  .select:focus,
  .textarea:focus {
    outline: 2px solid var(--accent2);
    outline-offset: 1px;
  }

  .btn-primary {
    background: var(--accent);
    color: var(--text-contrast);
    border: 1px solid var(--accent);
    transition: color 0.2s ease, background 0.2s ease, filter 0.2s ease;
  }

  .btn-primary:hover {
    filter: brightness(1.08);
  }

  .btn-ghost {
    background: transparent;
    color: var(--text-default);
  }

  .btn-outline {
    background: transparent;
    color: var(--text-default);
    border: 1px solid var(--line);
    transition: color 0.2s ease, border-color 0.2s ease, background 0.2s ease;
  }

  .btn-outline:hover {
    border-color: var(--accent);
    color: var(--accent);
  }

  .btn-primary:focus-visible,
  .btn-outline:focus-visible,
  .btn-ghost:focus-visible {
    outline: 2px solid var(--accent2);
    outline-offset: 2px;
  }

  .hr,
  .divider {
    border-color: var(--line);
  }
}

@layer components {
  .app-shell {
    @apply min-h-screen transition-colors;
  }

  .app-header {
    @apply sticky top-0 z-40 w-full backdrop-blur supports-[backdrop-filter]:backdrop-blur;
    background: var(--bg-2);
    border-bottom: 1px solid var(--line);
    color: var(--text-default);
  }

  .app-footer {
    background: var(--bg-2);
    border-top: 1px solid var(--line);
    color: var(--muted);
  }

  .brand-token {
    background: var(--bg-3);
    color: var(--accent2);
  }

  .brand-token::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    border: 1px solid var(--line);
    opacity: 0.6;
  }

  .nav-link {
    color: var(--muted);
  }

  .nav-link:hover,
  .nav-link:focus-visible {
    color: var(--accent);
  }

  .theme-toggle {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-xs font-semibold uppercase tracking-wide transition;
    background: var(--bg-2);
    border: 1px solid var(--line);
    color: var(--text-default);
  }

  .theme-toggle:hover,
  .theme-toggle:focus-visible {
    color: var(--accent2);
  }

  .card-tone {
    background: var(--bg-2);
    border: 1px solid var(--line);
  }

  .card-subtle {
    background: var(--bg-3);
    border: 1px solid var(--line);
  }

  .badge-surface {
    background: var(--badge-surface);
    border: 1px solid var(--line);
    color: var(--text-default);
  }

  .badge-outline {
    border: 1px solid var(--line);
    color: var(--muted);
    background: transparent;
  }

  .badge-success {
    border: 1px solid var(--success);
    color: var(--success);
    background: transparent;
  }

  .badge-primary {
    border: 1px solid var(--accent);
    color: var(--accent);
    background: transparent;
  }

  .badge-warning {
    border: 1px solid var(--warning);
    color: var(--warning);
    background: transparent;
  }

  .badge-danger {
    border: 1px solid var(--danger);
    color: var(--danger);
    background: transparent;
  }

  .stat-surface {
    background: var(--bg-2);
    border: 1px solid var(--line);
  }

  .stat-label {
    color: var(--muted);
  }

  .stat-suffix {
    color: var(--muted);
  }

  .graph-shell {
    position: relative;
    border-radius: 1.5rem;
    border: 1px solid var(--line);
    background: var(--bg-2);
  }

  .graph-toolbar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    border-radius: 9999px;
    background: var(--bg-2);
    border: 1px solid var(--line);
    padding: 0.35rem 0.5rem;
    backdrop-filter: blur(12px);
  }

  .graph-select {
    background: var(--bg-2);
    color: var(--text-default);
    border: 1px solid var(--line);
    border-radius: 9999px;
    padding: 0.25rem 0.75rem;
  }

  .graph-select:focus-visible {
    outline: 2px solid var(--accent2);
    outline-offset: 2px;
  }

  .graph-menu {
    background: var(--bg-2);
    border: 1px solid var(--line);
    border-radius: 0.75rem;
    box-shadow: 0 18px 46px -32px rgba(12, 18, 34, 0.45);
  }

  .graph-tooltip {
    background: var(--bg-2);
    border: 1px solid var(--line);
    border-radius: 0.75rem;
    color: var(--text-default);
    box-shadow: 0 18px 46px -32px rgba(12, 18, 34, 0.55);
    padding: 0.75rem;
  }

  .graph-legend {
    color: var(--muted);
  }
}

.fta-node {
  transition: transform 0.2s ease, opacity 0.2s ease;
  transform-box: fill-box;
  transform-origin: center;
}

.fta-node.is-dimmed {
  opacity: 0.25;
}

.fta-node.is-selected {
  stroke: var(--accent);
  stroke-width: 2.4px;
  transform: scale(1.08);
}

.fta-links line {
  transition: stroke 0.2s ease, stroke-width 0.2s ease, opacity 0.2s ease;
}

.fta-links line.is-active {
  stroke: var(--accent);
  stroke-width: 2.2px;
  opacity: 1;
}

.fta-label {
  paint-order: stroke fill;
  stroke: var(--bg);
  stroke-width: 2px;
  stroke-opacity: 0.85;
  stroke-linejoin: round;
}

.fta-graph-tooltip {
  opacity: 0;
  transition: opacity 0.15s ease;
}
